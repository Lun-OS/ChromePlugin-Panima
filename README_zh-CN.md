[English Version](README.md)

# 爬逆马 (Panima) - 网络流量捕获扩展

## 项目名称
爬逆马 (Panima)

## 描述
"爬逆马" (Panima) 是一款 Chrome 浏览器扩展，旨在监控和捕获网络流量，包括 JavaScript 文件、CSS、HTML、图片、视频以及其他资源，以及 WebSocket 帧。它允许用户将捕获到的数据保存为本地 ZIP 文件，用于逆向工程分析。

## 功能特性
*   **全面的网络捕获**: 监控和捕获各种类型的网络资源（JS、CSS、HTML、图片、视频、其他）和原始网络数据包。
*   **WebSocket 帧捕获**: 记录 WebSocket 消息（发送和接收），以便进行详细分析。
*   **选择性过滤**: 用户可以通过用户友好的弹出界面选择要捕获的资源类型。
*   **自动 ZIP 导出**: 所有捕获到的数据都将打包成一个 ZIP 归档文件，方便下载和离线分析。
*   **绕过缓存**: 在捕获期间禁用浏览器缓存，以确保所有资源都被重新获取和记录。
*   **详细的请求/响应数据**: 捕获完整的请求和响应头、方法、URL、状态码和 POST 数据。

## 如何使用

### 安装
1.  **下载扩展**: 获取扩展文件（通常是一个包含 `manifest.json`、`background.js`、`popup.html`、`popup.js` 等的 `.zip` 文件）。
2.  **解压扩展**: 将下载的 ZIP 文件解压到本地文件夹。
3.  **打开 Chrome 扩展程序页面**:
    *   打开 Chrome 浏览器。
    *   在地址栏输入 `chrome://extensions` 并按回车。
4.  **启用开发者模式**:
    *   打开“开发者模式”开关，通常位于扩展程序页面的右上角。
5.  **加载已解压的扩展程序**:
    *   点击“加载已解压的扩展程序”按钮。
    *   选择您解压扩展文件的文件夹。
6.  **固定扩展程序（可选）**: 为了方便使用，点击 Chrome 工具栏中的拼图图标，然后固定“爬逆马”扩展程序。

### 捕获网络流量
1.  **导航到目标页面**: 在新的 Chrome 标签页中打开您希望监控的网页。
2.  **打开扩展程序弹出窗口**: 点击 Chrome 工具栏中的“爬逆马”扩展程序图标。
3.  **选择过滤器**: 在弹出窗口中，选择您要捕获的资源类型（例如：JS、CSS、HTML、图片、视频、数据包、其他）。
4.  **开始捕获**: 点击“开始爬取”按钮。状态将变为“爬取中”。
    *   扩展程序将自动重新加载当前标签页，以从头开始捕获所有网络活动。
5.  **浏览页面**: 根据需要与网页进行交互，以触发您想要捕获的网络请求。
6.  **停止捕获**: 完成浏览或捕获到足够的数据后，点击扩展程序弹出窗口中的“停止爬取”按钮。状态将变为“空闲”。
7.  **下载 ZIP**: 将出现一个“另存为”对话框，提示您将捕获到的数据保存为 ZIP 文件（例如：`panima_YYYYMMDD_HHMMSS.zip`）。选择一个位置并保存文件。

### 分析捕获到的数据
下载的 ZIP 文件将包含：
*   **资源文件**: 按域名组织的文件夹，包含捕获到的 JS、CSS、HTML、图片、视频和其他二进制文件。
*   **`packets/requests.json`**: 一个 JSON 文件，包含所有捕获到的网络请求、响应和 WebSocket 帧的详细信息。这包括 URL、方法、头信息、状态码、POST 数据和 WebSocket 有效载荷数据。

## 权限
此扩展程序需要以下权限：
*   **`debugger`**: 允许扩展程序附加到标签页并监控网络活动。
*   **`downloads`**: 允许扩展程序将捕获到的 ZIP 文件下载到您的计算机。
*   **`storage`**: 用于存储用户偏好设置（例如：选定的过滤器）。
*   **`tabs`**: 允许扩展程序查询和重新加载标签页。
*   **`host_permissions` (`<all_urls>`)**: 授予访问所有 URL 上的网络请求的权限。

## 开发
此扩展程序使用标准的 Web Extension API 进行开发。
*   `background.js`: 负责附加到调试器、捕获网络事件、处理数据和构建 ZIP 文件的服务工作脚本。
*   `popup.html`: 扩展程序弹出界面的 HTML 结构。
*   `popup.js`: 弹出窗口的 JavaScript，处理用户交互并与后台脚本通信。
*   `manifest.json`: 定义扩展程序的元数据、权限和入口点。

---
作者: Lun.
